(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{152:function(e,t,n){},166:function(e,t,n){},198:function(e,t,n){"use strict";n.r(t);var a,c,r=n(0),i=n.n(r),l=n(22),o=n.n(l),s=(n(152),n(12)),j=n(70),d=n.n(j),b=n(89),u=n(26),h=n(28),O=n(53),x=n(58),f=n(41);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function g(e,t){var n=e.title,i=e.titleId,l=m(e,["title","titleId"]);return r.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,ref:t,"aria-labelledby":i},l),n?r.createElement("title",{id:i},n):null,a||(a=r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),c||(c=r.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})))}var v,y,w,S,k,C,T,N,P,W=r.forwardRef(g);n.p;function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function I(e,t){var n=e.title,a=e.titleId,c=A(e,["title","titleId"]);return r.createElement("svg",E({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,v||(v=r.createElement("line",{x1:4,y1:21,x2:4,y2:14})),y||(y=r.createElement("line",{x1:4,y1:10,x2:4,y2:3})),w||(w=r.createElement("line",{x1:12,y1:21,x2:12,y2:12})),S||(S=r.createElement("line",{x1:12,y1:8,x2:12,y2:3})),k||(k=r.createElement("line",{x1:20,y1:21,x2:20,y2:16})),C||(C=r.createElement("line",{x1:20,y1:12,x2:20,y2:3})),T||(T=r.createElement("line",{x1:1,y1:14,x2:7,y2:14})),N||(N=r.createElement("line",{x1:9,y1:8,x2:15,y2:8})),P||(P=r.createElement("line",{x1:17,y1:16,x2:23,y2:16})))}var L=r.forwardRef(I),z=(n.p,n(115),[{featureType:"all",elementType:"geometry.fill",stylers:[{weight:"2.00"}]},{featureType:"all",elementType:"geometry.stroke",stylers:[{color:"#9c9c9c"}]},{featureType:"all",elementType:"labels.text",stylers:[{visibility:"on"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#eeeeee"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#7b7b7b"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#46bcec"},{visibility:"on"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#c8d7d4"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#070707"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]}]),B=n(287),D=n(283),R=n(237),_=n(238),U=n(239),M=n(73),F=n(282),G=n(289),H=n(245),J=n(240),Z=n(241),q=n(242),Y=n(243),K=n(244),$=n(246),V=n(98),Q=n(288),X=n(1);function ee(e){return Object(X.jsx)(D.a,Object(u.a)({elevation:6,variant:"filled"},e))}var te=Object(R.a)((function(e){return{root:{backgroundColor:"white"},icons:{fill:V.a[800]}}})),ne=["places"],ae={height:"100vh",width:"100vw"},ce={styles:z,disableDefaultUI:!0,zoomControl:!1},re={lat:51.501286,lng:.046541};function ie(e){var t=e.panTo;return Object(X.jsx)("button",{className:"locate",onClick:function(){navigator.geolocation.getCurrentPosition((function(e){t({lat:e.coords.latitude,lng:e.coords.longitude})}),(function(){return null}))},children:Object(X.jsx)("img",{src:"./my_loc.svg",alt:"loc"})})}function le(e){var t=e.panTo,n=Object(x.a)({requestOptions:{location:{lat:function(){return 43.6532},lng:function(){return-79.3832}},radius:7e4}}),a=n.ready,c=n.value,r=n.suggestions,i=r.status,l=r.data,o=n.setValue,s=n.clearSuggestions,j=function(){var e=Object(b.a)(d.a.mark((function e(n){var a,c,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(n,!1),s(),e.prev=2,e.next=5,Object(x.b)({address:n});case 5:return a=e.sent,e.next=8,Object(x.c)(a[0]);case 8:c=e.sent,r=c.lat,i=c.lng,t({lat:r,lng:i}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log("\ud83d\ude31 Error: ",e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsx)("div",{className:"search",children:Object(X.jsxs)(f.a,{onSelect:j,children:[Object(X.jsx)(f.b,{value:c,onChange:function(e){o(e.target.value)},disabled:!a,placeholder:"Search"}),Object(X.jsx)(f.e,{children:Object(X.jsx)(f.c,{children:"OK"===i&&l.map((function(e){e.id;var t=e.description;return Object(X.jsx)(f.d,{value:t},t)}))})})]})})}var oe=function(e){var t=e.currentLat,n=e.currentLng,a=i.a.useState([]),c=Object(s.a)(a,2),l=c[0],o=c[1],j=i.a.useState(null),d=Object(s.a)(j,2),b=d[0],u=d[1],x=te();Object(r.useLayoutEffect)((function(){console.log("useEffect triggered"),fetch("/api/toilet/nearbyToilets?lat="+t+"&lng="+n+"&maxDistance=10000",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log("Found toilets, "+e.length+" toilets");var t=JSON.parse(localStorage.getItem("filterSettings")),n=[];if(!t||!e||0===e.length)return o(e),void console.log("no filter or toilets found.");e.forEach((function(e){var a=!0;t.differentlyAbled&&""!==t.differentlyAbled&&"true"===t.differentlyAbled&&null!==e.differentlyAbled&&!1===e.differentlyAbled&&(a=!1),""!==t.indianPreferred&&null!==e.isIndian&&("true"===t.indianPreferred&&!1===e.isIndian||"false"===t.indianPreferred&&!0===e.isIndian)&&(a=!1),""!==t.maximumPrice&&null!==e.restroomPrice&&parseInt(t.maximumPrice)<e.restroomPrice&&(a=!1),t.isAvailable&&""!==t.isAvailable&&null!==e.isAvailable&&"true"===t.isAvailable&&!1===e.isAvailable&&(a=!1),"true"===t.needsToiletPaper&&null!==e.hasToiletPaper&&!1===e.hasToiletPaper&&(a=!1),""!==t.gender&&null!==e.gender&&("male"===t.gender&&"a"===e.gender||"female"===t.gender&&"b"===e.gender||"other"===t.gender&&"c"===!e.gender)&&(a=!1),a?n.push(e):console.log({toilet:e,filter:t})})),o(n),console.log("Filtered toilets, "+n.length+" toilets")}))}),[]);return Object(X.jsxs)("div",{children:[l.map((function(e){return Object(X.jsx)(O.c,{position:{lat:e.lat,lng:e.lng},onClick:function(){!function(e){fetch("/api/toilet/oneToilet",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({toilet_id:e._id})}).then((function(e){return e.json()})).then((function(e){console.log(e),u(e)})).catch((function(e){console.log(e)}))}(e)},icon:{url:"https://icon-library.com/images/restroom-icon-png/restroom-icon-png-18.jpg",origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(15,15),scaledSize:new window.google.maps.Size(50,50)}},"".concat(e._id))})),b?Object(X.jsx)(O.b,{position:{lat:b.lat,lng:b.lng},onCloseClick:function(){u(null)},children:Object(X.jsx)("div",{children:Object(X.jsxs)(_.a,{children:[Object(X.jsxs)(U.a,{children:[Object(X.jsx)(M.a,{variant:"body2",component:"p",children:b.landmarkName}),Object(X.jsx)(F.a,{component:"fieldset",borderColor:"transparent",children:b.avgRating>0?Object(X.jsx)(Q.a,{name:"read-only",value:b.avgRating>0?b.avgRating:0,readOnly:!0}):null}),Object(X.jsxs)("div",{children:[b.differentlyAbled?Object(X.jsxs)("span",{children:[Object(X.jsx)(G.a,{variant:"outlined",icon:Object(X.jsx)(J.a,{className:x.icons}),size:"small",label:"Different abled friendly",className:x.root}),"\xa0"]}):null,"w"===b.toiletType?Object(X.jsxs)("span",{children:[" ",Object(X.jsx)(G.a,{variant:"outlined",icon:Object(X.jsx)(Z.a,{className:x.icons}),size:"small",label:"Commode",className:x.root}),"\xa0 "]}):null,"a"===b.gender?Object(X.jsxs)("span",{children:[" ",Object(X.jsx)(G.a,{variant:"outlined",icon:Object(X.jsx)(q.a,{className:x.icons}),size:"small",label:"Ladies",className:x.root}),"\xa0 "]}):null,"b"===b.gender?Object(X.jsxs)("span",{children:[" ",Object(X.jsx)(G.a,{variant:"outlined",icon:Object(X.jsx)(Y.a,{className:x.icons}),size:"small",label:"Gents",className:x.root}),"\xa0 "]}):null,"c"===b.gender?Object(X.jsxs)("span",{children:[" ",Object(X.jsx)(G.a,{variant:"outlined",icon:Object(X.jsx)(K.a,{className:x.icons}),label:"Unisex",size:"small",className:x.root}),"\xa0 "]}):null]})]}),Object(X.jsx)(H.a,{children:Object(X.jsx)(h.c,{to:"/one_toilet/"+b._id,children:Object(X.jsx)(G.a,{icon:Object(X.jsx)($.a,{style:{color:"white"}}),label:"Details",style:{backgroundColor:"#3f50b5",color:"white",fontWeight:"bold"}})})})]})})}):null]})},se=function(){var e=Object(O.d)({googleMapsApiKey:"AIzaSyCBhG4L1BBGwH0qUj5qKpEU4twLOpcUjOM",libraries:ne}),t=e.isLoaded,n=e.loadError,a=i.a.useState(51.501286),c=Object(s.a)(a,2),r=c[0],l=c[1],o=i.a.useState(.046541),j=Object(s.a)(o,2),d=j[0],b=j[1],u=i.a.useState(14),x=Object(s.a)(u,2),f=x[0],p=x[1],m=i.a.useState(!1),g=Object(s.a)(m,2),v=g[0],y=g[1],w=i.a.useState(!1),S=Object(s.a)(w,2),k=S[0],C=S[1],T=function(e,t){C(!1)},N=i.a.useRef(),P=i.a.useCallback((function(e){N.current=e,y(!0)}),[]),E=i.a.useCallback((function(e){var t=e.lat,n=e.lng;N.current.panTo({lat:t,lng:n}),N.current.setZoom(14),A()}),[]),A=function(){console.log("Position changed."),l(N.current.getCenter().lat()),b(N.current.getCenter().lng()),I()},I=function(){if(!v)return 0;p(N.current.getZoom()),f<=12?C(!0):T()};return n?"Error":t?Object(X.jsxs)("div",{children:[Object(X.jsx)(h.c,{to:"/profile",className:"profile",children:Object(X.jsx)(W,{className:"profile"})}),Object(X.jsx)(h.c,{to:"/filter",className:"filter",children:Object(X.jsx)(L,{className:"filter"})}),Object(X.jsx)(ie,{panTo:E}),Object(X.jsx)(le,{panTo:E}),Object(X.jsxs)(O.a,{mapContainerStyle:ae,zoom:f,center:re,options:ce,onLoad:P,onDragEnd:A,onZoomChanged:I,children:[Object(X.jsx)(oe,{currentLat:r,currentLng:d,zoom:f},r*d),Object(X.jsx)(B.a,{open:k,autoHideDuration:5e3,onClose:T,children:Object(X.jsx)(ee,{onClose:T,severity:"warning",children:"Zoom in more to load the toilets properly!"})})]},"map")]}):"Loading..."},je=n(202),de=n(247),be=n(248),ue=n(249),he=n(253),Oe=n(254),xe=n(201),fe=n(256),pe=n(250),me=n(251),ge=n(252),ve=n(255),ye=n(124),we=n.n(ye),Se=n(27),ke=Object(R.a)((function(e){return{root:{width:"100%",maxWidth:360}}}));function Ce(){var e=ke();return Object(X.jsx)("div",{className:e.root,children:Object(X.jsxs)(de.a,{component:"nav","aria-label":"main mailbox folders",children:[Object(X.jsx)(h.c,{to:"/",style:{textDecoration:"none",color:"#212121"},children:Object(X.jsxs)(je.a,{button:!0,children:[Object(X.jsx)(be.a,{children:Object(X.jsx)(K.a,{})}),Object(X.jsx)(ue.a,{primary:"Find a restroom"})]})}),Object(X.jsx)(h.c,{to:"/profile_info",style:{textDecoration:"none",color:"#212121"},children:Object(X.jsxs)(je.a,{button:!0,children:[Object(X.jsx)(be.a,{children:Object(X.jsx)(Y.a,{})}),Object(X.jsx)(ue.a,{primary:"Profile info"})]})}),Object(X.jsx)(h.c,{to:"/toilets_leased",style:{textDecoration:"none",color:"#212121"},children:Object(X.jsxs)(je.a,{button:!0,children:[Object(X.jsx)(be.a,{children:Object(X.jsx)(we.a,{})}),Object(X.jsx)(ue.a,{primary:"Toilets Leased"})]})}),Object(X.jsxs)(h.c,{to:"/profile_info",style:{textDecoration:"none",color:"#212121"},children:[Object(X.jsxs)(je.a,{button:!0,children:[Object(X.jsx)(be.a,{children:Object(X.jsx)(pe.a,{})}),Object(X.jsx)(ue.a,{primary:"Settings"})]}),Object(X.jsxs)(je.a,{button:!0,children:[Object(X.jsx)(be.a,{children:Object(X.jsx)(me.a,{})}),Object(X.jsx)(ue.a,{primary:"Wallet"})]})]}),Object(X.jsx)(h.c,{to:"/new_toilet",style:{textDecoration:"none",color:"#212121"},children:Object(X.jsxs)(je.a,{button:!0,children:[Object(X.jsx)(be.a,{children:Object(X.jsx)(ge.a,{})}),Object(X.jsx)(ue.a,{primary:"Add restroom"})]})})]})})}var Te=function(){var e=Object(Se.f)();return Object(X.jsxs)("div",{children:[Object(X.jsx)(he.a,{position:"static",color:"secondary",elevation:0,children:Object(X.jsx)(Oe.a,{children:Object(X.jsx)(xe.a,{edge:"start",color:"primary","aria-label":"menu",children:Object(X.jsx)(ve.a,{onClick:e.goBack})})})}),Object(X.jsxs)("main",{children:[Object(X.jsx)(fe.a,{maxWidth:"xs",children:Object(X.jsx)(M.a,{variant:"h3",align:"left",children:"\xa0 Hello,"})}),Object(X.jsx)(fe.a,{maxWidth:"xs",minHeigth:"20vh",children:Object(X.jsxs)(M.a,{variant:"h4",align:"left",children:["\xa0\xa0    ",JSON.parse(localStorage.getItem("user")).name]})}),Object(X.jsx)(fe.a,{maxWidth:"xs",align:"center",children:Object(X.jsx)(Ce,{})})]})]})},Ne=n(262),Pe=n(259),We=n(281),Ee=n(290),Ae=n(260),Ie=(n.p,n(257)),Le=n(258);function ze(e){return Object(X.jsx)(D.a,Object(u.a)({elevation:6,variant:"filled"},e))}var Be=Object(R.a)((function(e){return{container:{padding:e.spacing(3)},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:65,alignItems:"flex-start",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},title:{flexGrow:1,alignSelf:"center"}}})),De=function(){var e=i.a.useState(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(r.useContext)(Bt),l=(c.state,c.dispatch),o=Be(),j=Object(Se.f)(),d=Object(r.useState)(null),b=Object(s.a)(d,2),u=(b[0],b[1]),h=Object(r.useState)(!1),O=Object(s.a)(h,2),x=O[0],f=O[1],p=Object(r.useState)([]),m=Object(s.a)(p,2),g=m[0],v=m[1];return Object(r.useEffect)((function(){var e=new Headers;e.append("Authorization","Bearer "+localStorage.getItem("jwt"));var t=new Request("/api/profile/userData",{method:"GET",headers:e});fetch(t).then((function(e){return e.json()})).then((function(e){f(!0),v(e)}),(function(e){f(!0),u(e)}))}),[]),x?Object(X.jsxs)("div",{children:[Object(X.jsx)(he.a,{position:"static",color:"secondary",elevation:0,children:Object(X.jsx)(Oe.a,{children:Object(X.jsx)(xe.a,{edge:"start",color:"primary","aria-label":"menu",children:Object(X.jsx)(Ie.a,{onClick:j.goBack})})})}),Object(X.jsx)(he.a,{position:"static",color:"secondary",elevation:0,children:Object(X.jsx)(Oe.a,{})}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsxs)(fe.a,{className:o.container,maxWidth:"xs",container:!0,children:[Object(X.jsxs)(fe.a,{align:"center",children:[Object(X.jsx)(Ee.a,{style:{width:"80px",height:"80px"},children:Object(X.jsx)(Le.a,{style:{width:"80px",height:"80px"}})}),Object(X.jsx)("br",{}),Object(X.jsx)(M.a,{children:g.name})]}),Object(X.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(X.jsxs)(Pe.a,{container:!0,spacing:3,style:{paddingTop:40},children:[Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(Pe.a,{container:!0,spacing:2,children:[Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(Ae.a,{component:"legend",children:"Name"})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(We.a,{fullWidth:!0,name:"name",size:"small",variant:"outlined",value:g.name})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(Ae.a,{component:"legend",children:"Contact number"})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(We.a,{fullWidth:!0,name:"phone",size:"small",variant:"outlined",value:g.phone})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(Ae.a,{component:"legend",children:"Email address"})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(We.a,{fullWidth:!0,name:"email",size:"small",variant:"outlined",value:g.email})})]})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(Ne.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",children:"COMMIT CHANGES"})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,align:"left",children:Object(X.jsx)(M.a,{children:Object(X.jsx)(Ne.a,{variant:"contained",style:{backgroundColor:"#3f50b5",color:"white"},onClick:function(){localStorage.clear(),l({type:"CLEAR"}),j.push("/login")},children:"Logout"})})})]})}),Object(X.jsx)(B.a,{open:n,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&a(!1)},children:Object(X.jsx)(ze,{severity:"error",children:"Your form details are not valid!"})})]})]}):Object(X.jsx)("div",{})};function Re(e){return Object(X.jsx)(D.a,Object(u.a)({elevation:6,variant:"filled"},e))}var _e=Object(R.a)((function(e){return{container:{padding:e.spacing(3)},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:65,alignItems:"flex-start",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},title:{flexGrow:1,alignSelf:"center"}}})),Ue=function(){var e=i.a.useState(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],c=_e(),l=Object(Se.f)(),o=Object(r.useState)(""),j=Object(s.a)(o,2),d=j[0],b=j[1],u=Object(r.useState)(""),O=Object(s.a)(u,2),x=O[0],f=O[1],p=Object(r.useState)(""),m=Object(s.a)(p,2),g=m[0],v=m[1],y=Object(r.useState)(""),w=Object(s.a)(y,2),S=w[0],k=w[1];return Object(X.jsxs)("div",{children:[Object(X.jsx)(he.a,{position:"static",color:"secondary",elevation:0,children:Object(X.jsx)(Oe.a,{})}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsxs)(fe.a,{className:c.container,maxWidth:"xs",container:!0,align:"center",children:[Object(X.jsx)("img",{src:"./public_icons/logo.png",className:"logoImg"}),Object(X.jsx)(M.a,{children:Object(X.jsx)(F.a,{fontWeight:"fontWeightBold",children:"Flush away your worries"})}),Object(X.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(X.jsxs)(Pe.a,{container:!0,spacing:3,style:{paddingTop:40},children:[Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(Pe.a,{container:!0,spacing:2,children:[Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(We.a,{fullWidth:!0,label:"Name",name:"name",size:"small",variant:"outlined",onChange:function(e){return b(e.target.value)}})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(We.a,{fullWidth:!0,label:"Phone",name:"phone",size:"small",variant:"outlined",onChange:function(e){return k(e.target.value)}})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(We.a,{fullWidth:!0,label:"Email",name:"email",size:"small",variant:"outlined",onChange:function(e){return v(e.target.value)}})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(We.a,{fullWidth:!0,label:"Password",name:"password",size:"small",type:"password",variant:"outlined",onChange:function(e){return f(e.target.value)}})})]})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(Ne.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",onClick:function(){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(g)?fetch("/api/profile/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d,password:x,email:g,phone:S})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?(console.log(e.error),a(!0)):l.push("/LogIn")})).catch((function(e){console.log(e)})):a(!0)},children:"Sign up"})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,align:"center",children:Object(X.jsxs)(M.a,{children:["Already have an account? ",Object(X.jsx)(h.b,{to:"/LogIn",style:{textDecoration:"none",color:"#3f50b5"},children:Object(X.jsx)(F.a,{fontWeight:"fontWeightBold",children:"Login"})})]})})]})}),Object(X.jsx)(B.a,{open:n,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&a(!1)},children:Object(X.jsx)(Re,{severity:"error",children:"Your form details are not valid!"})})]})]})},Me=Object(R.a)((function(e){return{container:{padding:e.spacing(3)}}})),Fe=function(){var e=Me(),t=Object(r.useContext)(Bt),n=(t.state,t.dispatch),a=Object(Se.f)(),c=Object(r.useState)(""),i=Object(s.a)(c,2),l=i[0],o=i[1],j=Object(r.useState)(""),d=Object(s.a)(j,2),b=d[0],u=d[1];return Object(X.jsxs)("div",{children:[Object(X.jsx)(he.a,{position:"static",color:"secondary",elevation:0,children:Object(X.jsx)(Oe.a,{})}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsxs)(fe.a,{className:e.container,maxWidth:"xs",container:!0,align:"center",children:[Object(X.jsx)("img",{src:"./public_icons/logo.png",className:"logoImg"}),Object(X.jsx)(M.a,{children:Object(X.jsx)(F.a,{fontWeight:"fontWeightBold",children:"Get moving with flush"})})]}),Object(X.jsx)(fe.a,{className:e.container,maxWidth:"xs",children:Object(X.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(X.jsxs)(Pe.a,{container:!0,spacing:3,children:[Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(Pe.a,{container:!0,spacing:2,children:[Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(We.a,{fullWidth:!0,label:"Email",name:"email",size:"small",variant:"outlined",onChange:function(e){return u(e.target.value)}})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(We.a,{fullWidth:!0,label:"Password",name:"password",size:"small",type:"password",variant:"outlined",onChange:function(e){return o(e.target.value)}})})]})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(Ne.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",onClick:function(){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(b)?fetch("/api/profile/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:l,email:b})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?alert(e.error):(localStorage.setItem("jwt",e.token),localStorage.setItem("user",JSON.stringify(e.user)),console.log("jwt token",e.token),console.log("User data",e.user),n({type:"USER",payload:e.user}),a.push("/"))})).catch((function(e){console.log(e)})):alert("Please enter a valid email")},children:"Log in"})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,align:"center",children:Object(X.jsxs)(M.a,{children:["New User? ",Object(X.jsx)(h.b,{to:"/SignUp",style:{textDecoration:"none",color:"#3f50b5"},children:Object(X.jsx)(F.a,{fontWeight:"fontWeightBold",children:"Signup"})})]})})]})})})]})},Ge=n(263),He=n(291),Je=Object(R.a)((function(e){return{container:{padding:e.spacing(3)}}})),Ze=[{value:0,label:"\u20b90"},{value:100,label:"\u20b9500"}];function qe(e){return"\u20b9".concat(5*e)}function Ye(e){return"\u20b9".concat(5*e)}var Ke=function(){var e=Je(),t=Object(Se.f)(),n=Object(r.useState)(""),a=Object(s.a)(n,2),c=a[0],i=a[1],l=Object(r.useState)(""),o=Object(s.a)(l,2),j=o[0],d=o[1],b=Object(r.useState)(""),u=Object(s.a)(b,2),h=u[0],O=u[1],x=Object(r.useState)(""),f=Object(s.a)(x,2),p=f[0],m=f[1],g=Object(r.useState)(""),v=Object(s.a)(g,2),y=v[0],w=v[1],S=Object(r.useState)(""),k=Object(s.a)(S,2),C=(k[0],k[1]),T=Object(r.useState)(""),N=Object(s.a)(T,2),P=N[0],W=N[1];return Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("filterSettings"));e||(e={indianPreferred:"false",needsToiletPaper:"false",gender:"male",differentlyAbled:"false",maximumPrice:"500",isAvailable:"true"}),C(e),console.log(e),console.log(String(e.indianPreferred))})),Object(X.jsxs)("div",{children:[Object(X.jsx)(he.a,{position:"static",color:"secondary",elevation:0,children:Object(X.jsx)(Oe.a,{children:Object(X.jsx)(xe.a,{edge:"start",color:"primary","aria-label":"menu",children:Object(X.jsx)(ve.a,{onClick:t.goBack})})})}),Object(X.jsx)(fe.a,{className:e.container,maxWidth:"xs",paddingTop:"20vh",children:Object(X.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(X.jsxs)(Pe.a,{container:!0,spacing:3,children:[Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(Pe.a,{container:!0,spacing:2,children:[Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(M.a,{variant:"h4",align:"center",children:"Filter Search Results"})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(M.a,{variant:"body1",align:"center",children:"Tip: Leave any of the fields blank if you don't have a preference."})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(We.a,{fullWidth:!0,id:"indianPreferred",label:"Do you prefer Indian or Western style?",variant:"filled",select:!0,onChange:function(e){return w(e.target.value)},children:[Object(X.jsx)(Ge.a,{value:"true",children:"Indian"}),Object(X.jsx)(Ge.a,{value:"false",children:"Western"})]})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(We.a,{fullWidth:!0,id:"needsToiletPaper",label:"Do you require toilet paper?",variant:"filled",select:!0,onChange:function(e){return i(e.target.value)},children:[Object(X.jsx)(Ge.a,{value:"true",children:"Yes"}),Object(X.jsx)(Ge.a,{value:"false",children:"No"})]})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(We.a,{fullWidth:!0,id:"gender",label:"Your Gender?",variant:"filled",select:!0,onChange:function(e){return d(e.target.value)},children:[Object(X.jsx)(Ge.a,{value:"male",children:"Male"}),Object(X.jsx)(Ge.a,{value:"female",children:"Female"}),Object(X.jsx)(Ge.a,{value:"other",children:"Other"})]})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(We.a,{fullWidth:!0,id:"differentlyAbled",label:"Are you differently-abled?",variant:"filled",select:!0,onChange:function(e){return O(e.target.value)},children:[Object(X.jsx)(Ge.a,{value:"true",children:"Yes"}),Object(X.jsx)(Ge.a,{value:"false",children:"No"})]})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(We.a,{fullWidth:!0,id:"availability",label:"Toilet availability",variant:"filled",select:!0,onChange:function(e){return W(e.target.value)},children:[Object(X.jsx)(Ge.a,{value:"true",children:"Show only available toilets"}),Object(X.jsx)(Ge.a,{value:"false",children:"Show all toilets"})]})}),Object(X.jsxs)(Pe.a,{item:!0,xs:12,children:[Object(X.jsx)(M.a,{id:"discrete-slider-custom",gutterBottom:!0,children:"Maximum price"}),Object(X.jsx)(He.a,{defaultValue:20,valueLabelFormat:Ye,getAriaValueText:qe,"aria-labelledby":"discrete-slider-custom",step:10,valueLabelDisplay:"auto",marks:Ze,onChange:function(e,t){return m(t)}})]})]})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(Ne.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",onClick:function(){return localStorage.setItem("filterSettings",JSON.stringify({isAvailable:P,indianPreferred:y,needsToiletPaper:c,gender:j,differentlyAbled:h,maximumPrice:p})),void t.push("/")},children:"Done"})})]})})})]})},$e=n(265),Ve=n(266),Qe=n(264),Xe=Object(R.a)((function(e){return{container:{padding:e.spacing(3)}}})),et=function(e){var t=Xe(),n=Object(r.useState)([{landmarkName:"Loading",avgRating:""}]),a=Object(s.a)(n,2),c=a[0],i=a[1],l=Object(Se.f)(),o=Object(r.useState)(!0),j=Object(s.a)(o,2),d=j[0],b=j[1];Object(r.useEffect)((function(){fetch("/api/toilet/allToilets",{}).then((function(e){return e.json()})).then((function(e){var t=[],n=JSON.parse(localStorage.getItem("user"));e&&(e.forEach((function(e){console.log(n),String(e.owner._id)===String(n._id)&&t.push(e)})),i(t),b(!1))}))}),[]);return d?Object(X.jsx)("div",{}):Object(X.jsxs)("div",{children:[Object(X.jsx)(he.a,{position:"static",color:"secondary",elevation:0,children:Object(X.jsx)(Oe.a,{children:Object(X.jsx)(xe.a,{edge:"start",color:"primary","aria-label":"menu",children:Object(X.jsx)(ve.a,{onClick:l.goBack})})})}),Object(X.jsxs)(fe.a,{className:t.container,minHeight:"20vh",children:[Object(X.jsx)(M.a,{variant:"h4",align:"center",children:"Toilets Leased"}),Object(X.jsxs)(M.a,{variant:"h6",align:"center",children:["You own ",c.length," toilets"]})]}),Object(X.jsxs)(fe.a,{className:t.container,maxWidth:"xs",paddingTop:"20vh",children:[Object(X.jsxs)(de.a,{className:t.root,children:[Object(X.jsx)(Qe.a,{component:"li"}),c.map((function(e){return Object(X.jsxs)("div",{class:"row",children:[Object(X.jsxs)(je.a,{children:[Object(X.jsx)(ue.a,{primary:e.landmarkName,secondary:-1===e.avgRating?"Not yet rated":String(e.avgRating+"/5")}),Object(X.jsx)($e.a,{control:Object(X.jsx)(Ve.a,{name:e._id,size:"normal",color:"primary"}),label:"Available"})]}),Object(X.jsx)(Qe.a,{component:"li"})]})}))]}),Object(X.jsx)("br",{}),Object(X.jsx)(Ne.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",onClick:l.goBack,children:"Commit changes"})]})]})},tt=(n(166),function(e,t){return"USER"===t.type?t.payload:"CLEAR"===t.type?null:"UPDATE"===t.type?Object(u.a)(Object(u.a)({},e),{},{followers:t.payload.followers,following:t.payload.following}):"UPDATEPIC"===t.type?Object(u.a)(Object(u.a)({},e),{},{pic:t.payload}):e}),nt=n(280),at=n(127),ct=n(279),rt=n(128),it=(n(199),n(261)),lt=n(267),ot=n(284),st=n(203),jt=n(286),dt=n(268),bt=(n(76),n(269)),ut=n(270);n(108);function ht(e){return Object(X.jsx)(D.a,Object(u.a)({elevation:6,variant:"filled"},e))}var Ot=Object(R.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},input:{display:"none"}}})),xt=function(){var e=i.a.useState(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],c=i.a.useState(""),l=Object(s.a)(c,2),o=l[0],j=l[1],d=i.a.useState(!1),b=Object(s.a)(d,2),h=b[0],O=b[1],x=i.a.useState(""),f=Object(s.a)(x,2),p=f[0],m=f[1],g=Object(Se.f)(),v=i.a.useState({width:"100vw",height:"40vh",latitude:28.7,longitude:77.2,zoom:10}),y=Object(s.a)(v,2),w=y[0],S=y[1],k=(Object(r.useRef)(),Object(r.useCallback)((function(e){return S(e)}),[])),C=(Object(r.useCallback)((function(e){return k(Object(u.a)(Object(u.a)({},e),{transitionDuration:1e3}))}),[k]),Object(r.useState)(null)),T=Object(s.a)(C,2),N=T[0],P=T[1];Object(r.useEffect)((function(){P({latitude:w.latitude,longitude:w.longitude})}),[w]);var W=Object(r.useState)({}),E=Object(s.a)(W,2),A=(E[0],E[1]),I=(Object(r.useCallback)((function(e){A((function(t){return Object(u.a)(Object(u.a)({},t),{},{onDragStart:e.lngLat})}))}),[]),Object(r.useCallback)((function(e){A((function(t){return Object(u.a)(Object(u.a)({},t),{},{onDrag:e.lngLat})}))}),[]),i.a.useState("")),L=Object(s.a)(I,2),z=L[0],D=L[1],R=i.a.useState(),_=Object(s.a)(R,2),U=_[0],F=_[1],G=i.a.useState(),H=Object(s.a)(G,2),J=H[0],Z=H[1],q=i.a.useState(!1),Y=Object(s.a)(q,2),$=Y[0],V=Y[1],Q=i.a.useState("a"),ee=Object(s.a)(Q,2),te=ee[0],ne=ee[1],ae=i.a.useState(!1),ce=Object(s.a)(ae,2),re=ce[0],ie=ce[1],le=i.a.useState(""),oe=Object(s.a)(le,2),se=(oe[0],oe[1],i.a.useState(!1)),je=Object(s.a)(se,2),de=je[0],be=je[1],ue=i.a.useState("i"),pe=Object(s.a)(ue,2),me=pe[0],ge=pe[1],ve=Object(r.useState)(""),ye=Object(s.a)(ve,2),we=ye[0],ke=ye[1],Ce=Object(r.useState)(""),Te=Object(s.a)(Ce,2),Ee=Te[0],Le=Te[1],ze=Object(r.useState)([]),Be=Object(s.a)(ze,2),De=Be[0],Re=Be[1],_e=Object(r.useState)(5),Ue=Object(s.a)(_e,2),Me=Ue[0],Fe=Ue[1],Ge=Ot();return Object(r.useEffect)((function(){Re([].concat(Object(rt.a)(De),[Ee]))}),[Ee]),Object(r.useEffect)((function(){Fe(Me-1)}),[Ee]),Object(X.jsxs)("div",{children:[Object(X.jsx)(he.a,{position:"static",color:"secondary",elevation:0,children:Object(X.jsxs)(Oe.a,{children:[Object(X.jsx)(xe.a,{edge:"start",color:"primary","aria-label":"menu",children:Object(X.jsx)(Ie.a,{onClick:g.goBack})}),Object(X.jsx)(M.a,{variant:"h6",children:"Tap location to place marker"})]})}),Object(X.jsx)(vt,{changeMarker:function(e){P(e),console.log(N)}}),Object(X.jsx)(fe.a,{maxWidth:"xs",children:Object(X.jsxs)(Pe.a,{container:!0,justify:"center",spacing:4,children:[Object(X.jsx)(Pe.a,{item:!0,xs:12}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(We.a,{fullWidth:!0,variant:"filled",id:"filled-basic",label:"Restroom landmark/name (e.g., Railways toilet)",value:z,onChange:function(e){return D(e.target.value)}})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(it.a,{component:"fieldset",children:[Object(X.jsx)(Ae.a,{component:"legend",children:"Restroom type"}),Object(X.jsxs)(lt.a,{"aria-label":"type",name:"type",value:me,onChange:function(e){ge(e.target.value)},children:[Object(X.jsx)($e.a,{value:"i",control:Object(X.jsx)(ot.a,{}),label:"Indian",style:{color:"black"}}),Object(X.jsx)($e.a,{value:"w",control:Object(X.jsx)(ot.a,{}),label:"Western",style:{color:"black"}})]})]})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(it.a,{component:"fieldset",children:[Object(X.jsx)(Ae.a,{component:"legend",children:"Gender accessibility"}),Object(X.jsxs)(lt.a,{"aria-label":"type",name:"type",value:te,onChange:function(e){ne(e.target.value)},children:[Object(X.jsx)($e.a,{value:"a",control:Object(X.jsx)(ot.a,{}),label:"Ladies",style:{color:"black"}}),Object(X.jsx)($e.a,{value:"b",control:Object(X.jsx)(ot.a,{}),label:"Gents",style:{color:"black"}}),Object(X.jsx)($e.a,{value:"c",control:Object(X.jsx)(ot.a,{}),label:"Unisex",style:{color:"black"}})]})]})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(it.a,{component:"fieldset",children:[Object(X.jsx)(Ae.a,{component:"legend",children:"Norms"}),Object(X.jsxs)(st.a,{row:!0,children:[Object(X.jsx)($e.a,{control:Object(X.jsx)(jt.a,{checked:$,onChange:function(e){V(e.target.checked)},name:"has toilet paper"}),label:"Toilet paper included"}),Object(X.jsx)($e.a,{control:Object(X.jsx)(jt.a,{checked:re,onChange:function(e){ie(e.target.checked)},name:"diff ab friendly"}),label:"Differently abled friendly"})]})]})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(it.a,{component:"fieldset",children:[Object(X.jsx)(Ae.a,{component:"legend",children:"Ownership (skip if restroom is privately held)"}),Object(X.jsx)(st.a,{row:!0,children:Object(X.jsx)($e.a,{control:Object(X.jsx)(jt.a,{checked:de,onChange:function(e){be(e.target.checked)},name:"public toilet"}),label:"Public restroom"})})]})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(it.a,{component:"fieldset",children:[Object(X.jsx)(Ae.a,{component:"legend",children:"Pricing"}),Object(X.jsx)("br",{}),Object(X.jsx)(st.a,{row:!0,children:Object(X.jsxs)(Pe.a,{container:!0,spacing:2,children:[Object(X.jsx)(Pe.a,{item:!0,xs:6,children:Object(X.jsx)(We.a,{fullWidth:!0,variant:"filled",value:U,onChange:function(e){return F(e.target.value)},id:"filled-basic",label:"Restroom (INR)",InputProps:{startAdornment:Object(X.jsx)(dt.a,{position:"start",children:Object(X.jsx)(K.a,{})})}})}),Object(X.jsx)(Pe.a,{item:!0,xs:6,children:Object(X.jsx)(We.a,{fullWidth:!0,variant:"filled",value:J,onChange:function(e){return Z(e.target.value)},id:"filled-basic",label:"Bathroom (INR)",InputProps:{startAdornment:Object(X.jsx)(dt.a,{position:"start",children:Object(X.jsx)(bt.a,{})})}})}),Object(X.jsxs)(Pe.a,{item:!0,xs:12,children:[Object(X.jsx)("br",{}),Object(X.jsxs)(Ae.a,{component:"legend",children:["Upload image (optional). ",Me," uploads remaining"]}),Object(X.jsx)("br",{}),Object(X.jsx)(fe.a,{align:"center",children:Object(X.jsxs)("div",{className:Ge.root,children:[Object(X.jsx)("label",{htmlFor:"contained-button-file",children:Object(X.jsx)(Ne.a,{variant:"contained",color:"primary",component:"span",onClick:function(e){!function(){if(0!=Me&&we){var e=new FormData;e.append("file",we),e.append("upload_preset","trash-overflow"),e.append("cloud_name","dngglmcuk"),fetch("https://api.cloudinary.com/v1_1/dngglmcuk/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){e.error?(O(!0),m(e.error),console.log(e.error)):(Le(e.url),a(!0),j("Image upload successful"))})).catch((function(e){O(!0),m(e),console.log(e)}))}else O(!0),m("You cannot upload more than 4 pictures. Make sure that image field is not null"),console.log("Not more than 4")}()},children:"Upload"})}),Object(X.jsx)("input",{accept:"image/*",className:Ge.input,multiple:!0,id:"icon-button-file",type:"file",onChange:function(e){return ke(e.target.files[0])}}),Object(X.jsx)("label",{htmlFor:"icon-button-file",children:Object(X.jsx)(xe.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(X.jsx)(ut.a,{})})})]})})]}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(Ne.a,{onClick:function(){return console.log({landmarkName:z,isPublic:de,differentlyAbled:re,gender:te,hasToiletPaper:$,restroomPrice:U,bathroomPrice:J,lat:N.lat,lng:N.lng,Indian:me,photos:De}),void fetch("/api/toilet/newToilet",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({landmarkName:z,isPublic:de,differentlyAbled:re,gender:te,hasToiletPaper:$,restroomPrice:U,bathroomPrice:J,toiletType:me,lat:N.lat,lng:N.lng,photos:De})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?(O(!0),m(e.error),console.log(e.error)):(a(!0),j("Added listing"),g.push("/"))})).catch((function(e){console.log(e)}))},color:"primary",on:!0,fullWidth:!0,type:"submit",variant:"contained",children:"Add restroom"})})]})})]})})]})}),Object(X.jsx)(B.a,{open:n,autoHideDuration:6e3,onClose:function(e){a(!1)},children:Object(X.jsx)(ht,{onClose:function(e){a(!1)},severity:"success",children:o})}),Object(X.jsx)(B.a,{open:h,autoHideDuration:6e3,onClose:function(e){O(!1)},children:Object(X.jsx)(ht,{onClose:function(e){O(!1)},severity:"error",children:p})})]})},ft=["places"],pt={height:"50vh",width:"100vw"},mt={styles:z,disableDefaultUI:!0,zoomControl:!1},gt={lat:43.6532,lng:-79.3832};function vt(e){var t=e.changeMarker,n=Object(O.d)({googleMapsApiKey:"AIzaSyCBhG4L1BBGwH0qUj5qKpEU4twLOpcUjOM",libraries:ft}),a=n.isLoaded,c=n.loadError,l=i.a.useState(null),o=Object(s.a)(l,2),j=o[0],d=o[1];Object(r.useEffect)((function(){t(j)}),[j]);var b=i.a.useCallback((function(e){d({lat:e.latLng.lat(),lng:e.latLng.lng()})}),[]),u=i.a.useRef(),h=i.a.useCallback((function(e){u.current=e}),[]),x=i.a.useCallback((function(e){var t=e.lat,n=e.lng;u.current.panTo({lat:t,lng:n}),u.current.setZoom(14)}),[]);return c?"Error":a?Object(X.jsxs)("div",{children:[Object(X.jsx)(yt,{panTo:x}),Object(X.jsx)(wt,{panTo:x}),Object(X.jsx)(O.a,{id:"map",mapContainerStyle:pt,zoom:8,center:gt,options:mt,onClick:b,onLoad:h,children:j?Object(X.jsx)(O.c,{position:{lat:j.lat,lng:j.lng}}):null})]}):"Loading..."}function yt(e){var t=e.panTo;return Object(X.jsx)("button",{className:"locatePicker",onClick:function(){navigator.geolocation.getCurrentPosition((function(e){t({lat:e.coords.latitude,lng:e.coords.longitude})}),(function(){return null}))},children:Object(X.jsx)("img",{src:"./my_loc.svg",alt:"loc"})})}function wt(e){var t=e.panTo,n=Object(x.a)({requestOptions:{location:{lat:function(){return 43.6532},lng:function(){return-79.3832}},radius:1e5}}),a=n.ready,c=n.value,r=n.suggestions,i=r.status,l=r.data,o=n.setValue,s=n.clearSuggestions,j=function(){var e=Object(b.a)(d.a.mark((function e(n){var a,c,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(n,!1),s(),e.prev=2,e.next=5,Object(x.b)({address:n});case 5:return a=e.sent,e.next=8,Object(x.c)(a[0]);case 8:c=e.sent,r=c.lat,i=c.lng,t({lat:r,lng:i}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log("\ud83d\ude31 Error: ",e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsx)("div",{className:"searchPicker",children:Object(X.jsxs)(f.a,{onSelect:j,children:[Object(X.jsx)(f.b,{value:c,onChange:function(e){o(e.target.value)},disabled:!a,placeholder:"Search"}),Object(X.jsx)(f.e,{children:Object(X.jsx)(f.c,{children:"OK"===i&&l.map((function(e){var t=e.id,n=e.description;return Object(X.jsx)(f.d,{value:n},t)}))})})]})})}var St=n(271),kt=n(272),Ct=n(273),Tt=n(274),Nt=n(275),Pt=n(276),Wt=n(277),Et=n(278);function At(e){return Object(X.jsx)(D.a,Object(u.a)({elevation:6,variant:"filled"},e))}var It=Object(R.a)({root:{maxWidth:345},media:{height:200}}),Lt=Object(R.a)({root:{fill:"#3f50b5"},media:{}}),zt=function(){var e=Object(Se.g)().toiletId,t=Object(r.useState)(),n=Object(s.a)(t,2),a=n[0],c=n[1],l=Object(r.useState)(!0),o=Object(s.a)(l,2),j=o[0],d=o[1];console.log(e);var b=i.a.useState(!1),u=Object(s.a)(b,2),h=u[0],O=u[1];Object(r.useEffect)((function(){fetch("/api/toilet/oneToilet",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({toilet_id:e})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?console.log(e.error):(console.log(e),c(e),d(!1))})).catch((function(e){console.log(e)}))}),[]);var x=i.a.useState(2),f=Object(s.a)(x,2),p=f[0],m=f[1],g=It(),v=Lt(),y=Object(Se.f)();return j?Object(X.jsx)("div",{}):Object(X.jsxs)("div",{children:[Object(X.jsx)(he.a,{position:"static",color:"secondary",elevation:0,children:Object(X.jsxs)(Oe.a,{children:[Object(X.jsx)(xe.a,{edge:"start",color:"primary","aria-label":"menu",children:Object(X.jsx)(Ie.a,{onClick:y.goBack})}),Object(X.jsx)(M.a,{variant:"h6"})]})}),Object(X.jsxs)(fe.a,{maxWidth:"xs",align:"center",children:[Object(X.jsxs)(_.a,{className:g.root,elevation:0,children:[Object(X.jsxs)(St.a,{children:[Object(X.jsx)(kt.a,{image:a.photos.length>1?a.photos[1]:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/49/Toilet_photo.jpg/800px-Toilet_photo.jpg",title:"landmarkName",className:g.media}),Object(X.jsxs)(U.a,{children:[Object(X.jsx)(M.a,{gutterBottom:!0,variant:"h5",component:"h2"}),Object(X.jsx)(M.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(X.jsx)(F.a,{component:"fieldset",borderColor:"transparent",children:Object(X.jsx)(Q.a,{name:"read-only",value:a.avgRating>0?a.avgRating:1})})})]})]}),Object(X.jsx)(H.a,{})]}),Object(X.jsxs)("div",{children:[Object(X.jsxs)(de.a,{component:"nav","aria-label":"main mailbox folders",children:[Object(X.jsxs)(je.a,{button:!0,children:[Object(X.jsx)(be.a,{children:Object(X.jsx)(Ct.a,{className:v.root})}),Object(X.jsx)(ue.a,{primary:a.landmarkName})]}),a.differentlyAbled?Object(X.jsxs)(je.a,{button:!0,children:[Object(X.jsx)(be.a,{children:Object(X.jsx)(Tt.a,{className:v.root})}),Object(X.jsx)(ue.a,{primary:"Differently Abled Friendly"})]}):null,Object(X.jsx)(Qe.a,{}),Object(X.jsxs)(je.a,{button:!0,children:[Object(X.jsx)(be.a,{children:Object(X.jsx)(Nt.a,{className:v.root})}),Object(X.jsx)(ue.a,{primary:0===a.restroomPrice?"Free services":"Restroom fees (INR): "+a.restroomPrice})]}),Object(X.jsxs)(je.a,{button:!0,children:[Object(X.jsx)(be.a,{children:Object(X.jsx)(Pt.a,{className:v.root})}),Object(X.jsx)(ue.a,{primary:0===a.bathroomPrice?"Free services":"Bathroom fees (INR): "+a.restroomPrice})]}),Object(X.jsx)(Qe.a,{}),Object(X.jsxs)(je.a,{button:!0,children:[Object(X.jsx)(be.a,{children:Object(X.jsx)(Wt.a,{className:v.root})}),Object(X.jsx)(ue.a,{primary:a.isAvailable?"Open from 9 AM to 9 PM everyday":"Closed"})]}),Object(X.jsx)(Qe.a,{}),Object(X.jsxs)(je.a,{button:!0,children:[Object(X.jsx)(be.a,{children:Object(X.jsx)(Et.a,{className:v.root})}),Object(X.jsx)(ue.a,{primary:a.owner&&a.owner.phone?a.owner.phone:"6000439169"})]})]}),Object(X.jsxs)(_.a,{elevation:0,children:[Object(X.jsxs)(St.a,{children:[Object(X.jsx)(kt.a,{title:"landmarkName"}),Object(X.jsxs)(U.a,{children:[Object(X.jsx)(M.a,{gutterBottom:!0,variant:"h5",component:"h2",children:"Rate this restroom"}),Object(X.jsx)(M.a,{color:"textSecondary",children:"Tell us about your perception of social hygiene"}),Object(X.jsx)(M.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(X.jsx)(F.a,{component:"fieldset",borderColor:"transparent",children:Object(X.jsx)(Q.a,{name:"read-only",value:p,onChange:function(e,t){m(t)}})})})]})]}),Object(X.jsx)(H.a,{children:Object(X.jsx)(Ne.a,{size:"small",onClick:function(){fetch("/api/toilet/newRating",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({toilet_id:e,rating:p})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?console.log(e.error):(console.log(e),c(e),O(!0))})).catch((function(e){console.log(e)}))},children:"SUBMIT"})})]})]})]}),Object(X.jsx)(B.a,{open:h,autoHideDuration:6e3,onClose:function(e){O(!1)},children:Object(X.jsx)(At,{onClose:function(e){O(!1)},severity:"success",children:"Your rating has been submitted"})})]})},Bt=Object(r.createContext)(),Dt=Object(at.a)({palette:{primary:{main:"#212121"},secondary:{main:"#fafafa"}},overrides:{MuiRadio:{root:{color:"#212121"},colorSecondary:{"&$checked":{color:"#212121"}}},MuiCheckbox:{root:{color:"#212121"},colorSecondary:{"&$checked":{color:"#212121"}}}}}),Rt=function(){var e=Object(Se.f)(),t=Object(r.useContext)(Bt),n=(t.state,t.dispatch);return Object(r.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t?n({type:"USER",payload:t}):e.location.pathname.startsWith(!e.location.pathname.startsWith("/api"))||e.push("/SignUp")}),[]),Object(X.jsxs)(Se.c,{children:[Object(X.jsx)(Se.a,{exact:!0,path:"/",children:Object(X.jsx)(se,{})}),Object(X.jsx)(Se.a,{path:"/profile",children:Object(X.jsx)(Te,{})}),Object(X.jsx)(Se.a,{path:"/login",children:Object(X.jsx)(Fe,{})}),Object(X.jsx)(Se.a,{path:"/signup",children:Object(X.jsx)(Ue,{})}),Object(X.jsx)(Se.a,{path:"/filter",children:Object(X.jsx)(Ke,{})}),Object(X.jsx)(Se.a,{path:"/new_toilet",children:Object(X.jsx)(xt,{})}),Object(X.jsx)(Se.a,{path:"/toilets_leased",children:Object(X.jsx)(et,{})}),Object(X.jsx)(Se.a,{path:"/example",children:Object(X.jsx)(se,{})}),Object(X.jsx)(Se.a,{path:"/profile_info",children:Object(X.jsx)(De,{})}),Object(X.jsx)(Se.a,{path:"/one_toilet/:toiletId",children:Object(X.jsx)(zt,{})})]})};var _t=function(){var e=Object(r.useReducer)(tt,null),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(X.jsx)(Bt.Provider,{value:{state:n,dispatch:a},children:Object(X.jsx)(ct.a,{theme:Dt,children:Object(X.jsx)(nt.a,{children:Object(X.jsx)(h.a,{children:Object(X.jsx)("div",{className:"App",children:Object(X.jsx)(Rt,{})})})})})})},Ut=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,293)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},Mt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ft(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(Object(X.jsx)(i.a.StrictMode,{children:Object(X.jsx)(_t,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Mt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ft(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ft(t,e)}))}}(),Ut()}},[[198,1,2]]]);
//# sourceMappingURL=main.9b095785.chunk.js.map